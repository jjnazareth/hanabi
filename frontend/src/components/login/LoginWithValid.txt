import React, { FC } from 'react'
import './styles.css'
import { useFormValidation } from './useFormValidation'
import { validateAuth } from './validateAuth'
import { TextField } from 'material-ui'

const initialState = { email: "", password: "" }

export const LoginWithValid: FC = () => {
  const { handleSubmit, handleChange, handleBlur, values, errors, isSubmitting } = useFormValidation(initialState, validateAuth)
  return (

    <form onSubmit={handleSubmit}>
      <TextField
        type="email"
        name="email"
        onChange={handleChange}
        onBlur={handleBlur}
        value={values.email}
        className={errors.email && "error-input"}
        autoComplete='off'
        placeholder="Your email address" />
      {errors.email && <p className="error-text">{errors.email}</p>}
      <TextField
        type="password"
        name="password"
        onChange={handleChange}
        onBlur={handleBlur}
        value={values.password}
        className={errors.password && "error-input"}
        placeholder="Choose a safe password" />
      {errors.password && <p className="error-text">{errors.password}</p>}
      <div>
        <button disabled={isSubmitting} type="submit">Submit</button>
      </div>
    </form>
  )
}
